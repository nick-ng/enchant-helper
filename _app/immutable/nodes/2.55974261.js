import{s as Ve,h as te,n as Se,r as He,e as ve,o as Ye}from"../chunks/scheduler.be62eccd.js";import{S as je,i as qe,g as h,s as D,m as L,h as _,j as C,x as F,c as I,f as d,n as y,k as g,a as V,y as o,z as Ae,A as oe,o as $,B as Ge,r as Ke,u as Fe,v as We,d as Xe,t as Je,w as Qe}from"../chunks/index.4ba873cb.js";import{e as de}from"../chunks/schemas.3f2493ca.js";import{e as Ze,S as $e,g as Be,a as De,b as Ie,c as et}from"../chunks/utils.6ad5fa6c.js";import{e as tt}from"../chunks/enchant-data.5bbc3879.js";import{o as lt}from"../chunks/ocr.4b93bd06.js";function Pe(s,e,t){const l=s.slice();l[17]=e[t];const n=l[17].enchantText.replace("\\d{1,9}",l[17].value.toString());l[18]=n;const r=et(l[9],l[18]);l[19]=r;const i=[{type:"count",value:{min:1},filters:l[17].ids.map(function(...a){return s[12](l[17],...a)})}];return l[20]=i,l}function Me(s,e,t){const l=s.slice();return l[23]=e[t],l}function at(s){let e,t=(s[4].status||ze)+"",l;return{c(){e=h("p"),l=L(t)},l(n){e=_(n,"P",{});var r=C(e);l=y(r,t),r.forEach(d)},m(n,r){V(n,e,r),o(e,l)},p(n,r){r&16&&t!==(t=(n[4].status||ze)+"")&&$(l,t)},d(n){n&&d(e)}}}function rt(s){let e,t;return{c(){e=h("img"),this.h()},l(l){e=_(l,"IMG",{src:!0,alt:!0}),this.h()},h(){te(e.src,t=s[4].imageDataBase64)||g(e,"src",t),g(e,"alt","capture")},m(l,n){V(l,e,n)},p(l,n){n&16&&!te(e.src,t=l[4].imageDataBase64)&&g(e,"src",t)},d(l){l&&d(e)}}}function Ue(s){let e,t,l='<th class="px-1 border-default text-left">Enchant</th> <th class="px-1 border-default">Uniques</th> <th class="px-1 border-default">ilvl 85+</th> <th class="px-1 border-default">Blizzard Crown</th> <th class="px-1 border-default">Past Sales</th>',n,r,i=de([...s[8],...s[1]]),c=[];for(let a=0;a<i.length;a+=1)c[a]=ye(Pe(s,i,a));return{c(){e=h("table"),t=h("thead"),t.innerHTML=l,n=D(),r=h("tbody");for(let a=0;a<c.length;a+=1)c[a].c()},l(a){e=_(a,"TABLE",{});var f=C(e);t=_(f,"THEAD",{"data-svelte-h":!0}),F(t)!=="svelte-o0w2sf"&&(t.innerHTML=l),n=I(f),r=_(f,"TBODY",{});var u=C(r);for(let v=0;v<c.length;v+=1)c[v].l(u);u.forEach(d),f.forEach(d)},m(a,f){V(a,e,f),o(e,t),o(e,n),o(e,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(r,null)},p(a,f){if(f&802){i=de([...a[8],...a[1]]);let u;for(u=0;u<i.length;u+=1){const v=Pe(a,i,u);c[u]?c[u].p(v,f):(c[u]=ye(v),c[u].c(),c[u].m(r,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=i.length}},d(a){a&&d(e),Ge(c,a)}}}function st(s){let e,t=Math.round(s[23][1].averagePrice*100)/100+"",l,n;return{c(){e=h("span"),l=L(t),n=L(" d"),this.h()},l(r){e=_(r,"SPAN",{class:!0});var i=C(e);l=y(i,t),n=y(i," d"),i.forEach(d),this.h()},h(){g(e,"class","text-lime-300")},m(r,i){V(r,e,i),o(e,l),o(e,n)},p(r,i){i&770&&t!==(t=Math.round(r[23][1].averagePrice*100)/100+"")&&$(l,t)},d(r){r&&d(e)}}}function nt(s){let e,t=Math.round(s[23][1].averagePrice*s[5])+"",l,n;return{c(){e=h("span"),l=L(t),n=L(" c"),this.h()},l(r){e=_(r,"SPAN",{class:!0});var i=C(e);l=y(i,t),n=y(i," c"),i.forEach(d),this.h()},h(){g(e,"class","text-gray-300")},m(r,i){V(r,e,i),o(e,l),o(e,n)},p(r,i){i&802&&t!==(t=Math.round(r[23][1].averagePrice*r[5])+"")&&$(l,t)},d(r){r&&d(e)}}}function Le(s){let e,t=s[23][1].sales.length+"",l,n,r=s[23][0]+"",i,c,a;function f(m,A){return m[23][1].averagePrice<1?nt:st}let u=f(s),v=u(s);return{c(){e=h("li"),l=L(t),n=L("× "),i=L(r),c=L(`:
												`),v.c(),a=D()},l(m){e=_(m,"LI",{});var A=C(e);l=y(A,t),n=y(A,"× "),i=y(A,r),c=y(A,`:
												`),v.l(A),a=I(A),A.forEach(d)},m(m,A){V(m,e,A),o(e,l),o(e,n),o(e,i),o(e,c),v.m(e,null),o(e,a)},p(m,A){A&770&&t!==(t=m[23][1].sales.length+"")&&$(l,t),A&770&&r!==(r=m[23][0]+"")&&$(i,r),u===(u=f(m))&&v?v.p(m,A):(v.d(1),v=u(m),v&&(v.c(),v.m(e,a)))},d(m){m&&d(e),v.d()}}}function ye(s){let e,t,l=s[18]+"",n,r,i,c,a,f,u,v,m,A,q,W,M,U,J,G,p,B,R,H,P=de(Object.entries(s[19]).sort(Re)),E=[];for(let S=0;S<P.length;S+=1)E[S]=Le(Me(s,P,S));return{c(){e=h("tr"),t=h("td"),n=L(l),r=D(),i=h("td"),c=h("a"),a=L("Uniques"),u=D(),v=h("td"),m=h("a"),A=L("ilvl 85+"),W=D(),M=h("td"),U=h("a"),J=L("Blizzard Crown"),p=D(),B=h("td"),R=h("ul");for(let S=0;S<E.length;S+=1)E[S].c();H=D(),this.h()},l(S){e=_(S,"TR",{});var k=C(e);t=_(k,"TD",{class:!0});var T=C(t);n=y(T,l),T.forEach(d),r=I(k),i=_(k,"TD",{class:!0});var X=C(i);c=_(X,"A",{href:!0,target:!0});var Y=C(c);a=y(Y,"Uniques"),Y.forEach(d),X.forEach(d),u=I(k),v=_(k,"TD",{class:!0});var le=C(v);m=_(le,"A",{href:!0,target:!0});var Q=C(m);A=y(Q,"ilvl 85+"),Q.forEach(d),le.forEach(d),W=I(k),M=_(k,"TD",{class:!0});var ee=C(M);U=_(ee,"A",{href:!0,target:!0});var ae=C(U);J=y(ae,"Blizzard Crown"),ae.forEach(d),ee.forEach(d),p=I(k),B=_(k,"TD",{class:!0});var re=C(B);R=_(re,"UL",{class:!0});var K=C(R);for(let se=0;se<E.length;se+=1)E[se].l(K);K.forEach(d),re.forEach(d),H=I(k),k.forEach(d),this.h()},h(){g(t,"class","px-1 border-default max-w-xs"),g(c,"href",f=Be("https://www.pathofexile.com/trade/search/Ancestor",s[20])),g(c,"target","uniqueBase"),g(i,"class","px-1 border-default"),g(m,"href",q=De("https://www.pathofexile.com/trade/search/Ancestor",s[20])),g(m,"target","ilvl85Base"),g(v,"class","px-1 border-default"),g(U,"href",G=Ie("https://www.pathofexile.com/trade/search/Ancestor",s[20])),g(U,"target","blizzardCrownBase"),g(M,"class","px-1 border-default"),g(R,"class","ml-4 list-disc"),g(B,"class","px-1 border-default")},m(S,k){V(S,e,k),o(e,t),o(t,n),o(e,r),o(e,i),o(i,c),o(c,a),o(e,u),o(e,v),o(v,m),o(m,A),o(e,W),o(e,M),o(M,U),o(U,J),o(e,p),o(e,B),o(B,R);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(R,null);o(e,H)},p(S,k){if(k&258&&l!==(l=S[18]+"")&&$(n,l),k&258&&f!==(f=Be("https://www.pathofexile.com/trade/search/Ancestor",S[20]))&&g(c,"href",f),k&258&&q!==(q=De("https://www.pathofexile.com/trade/search/Ancestor",S[20]))&&g(m,"href",q),k&258&&G!==(G=Ie("https://www.pathofexile.com/trade/search/Ancestor",S[20]))&&g(U,"href",G),k&802){P=de(Object.entries(S[19]).sort(Re));let T;for(T=0;T<P.length;T+=1){const X=Me(S,P,T);E[T]?E[T].p(X,k):(E[T]=Le(X),E[T].c(),E[T].m(R,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=P.length}},d(S){S&&d(e),Ge(E,S)}}}function Oe(s){let e,t,l,n,r="Delete Lab Notes",i,c;return{c(){e=h("img"),l=D(),n=h("button"),n.textContent=r,this.h()},l(a){e=_(a,"IMG",{class:!0,src:!0,alt:!0}),l=I(a),n=_(a,"BUTTON",{"data-svelte-h":!0}),F(n)!=="svelte-duzbms"&&(n.textContent=r),this.h()},h(){g(e,"class","max-w-4xl"),te(e.src,t=s[6])||g(e,"src",t),g(e,"alt","Custom 1")},m(a,f){V(a,e,f),V(a,l,f),V(a,n,f),i||(c=oe(n,"click",s[15]),i=!0)},p(a,f){f&64&&!te(e.src,t=a[6])&&g(e,"src",t)},d(a){a&&(d(e),d(l),d(n)),i=!1,c()}}}function Ne(s){let e,t,l,n,r="Delete Points of Interest",i,c;return{c(){e=h("img"),l=D(),n=h("button"),n.textContent=r,this.h()},l(a){e=_(a,"IMG",{class:!0,src:!0,alt:!0}),l=I(a),n=_(a,"BUTTON",{"data-svelte-h":!0}),F(n)!=="svelte-18guowi"&&(n.textContent=r),this.h()},h(){g(e,"class","max-w-4xl"),te(e.src,t=s[7])||g(e,"src",t),g(e,"alt","Custom 2")},m(a,f){V(a,e,f),V(a,l,f),V(a,n,f),i||(c=oe(n,"click",s[16]),i=!0)},p(a,f){f&128&&!te(e.src,t=a[7])&&g(e,"src",t)},d(a){a&&(d(e),d(l),d(n)),i=!1,c()}}}function xe(s){let e,t,l="Debug",n,r,i;return{c(){e=h("details"),t=h("summary"),t.textContent=l,n=D(),r=h("pre"),i=L(s[0])},l(c){e=_(c,"DETAILS",{});var a=C(e);t=_(a,"SUMMARY",{"data-svelte-h":!0}),F(t)!=="svelte-8t2ufj"&&(t.textContent=l),n=I(a),r=_(a,"PRE",{});var f=C(r);i=y(f,s[0]),f.forEach(d),a.forEach(d)},m(c,a){V(c,e,a),o(e,t),o(e,n),o(e,r),o(r,i)},p(c,a){a&1&&$(i,c[0])},d(c){c&&d(e)}}}function ot(s){let e,t,l="Enchant Search",n,r,i,c,a,f,u,v,m,A="Clear",q,W,M,U,J="Extra",G,p,B,R="Set as Lab Notes",H,P,E="Set as Points of Interest",S,k,T,X,Y,le,Q=s[3].length+"",ee,ae,re,K,se=`<h2>Instructions</h2> <p>Use Windows Snipping Tool (Win + Shift + s) or a similar program to take a screenshot of the
			enchant text in the Divine Font (see picture below for details).</p> <p>Do not include the glove/boot/helmet icons. <a href="https://github.com/naptha/tesseract.js" target="_blank">Tesseract.js</a>, an OCR library, will try and detect those as letters and that can prevent this program from
			finding some enchants.</p>`,me,ne,we,pe,ge,Ce;function ke(b,w){return!b[4].status&&b[4].imageDataBase64?rt:at}let ie=ke(s),j=ie(s),O=(s[8].length>0||s[1].length>0&&!s[4].status)&&Ue(s),N=s[6]&&Oe(s),x=s[7]&&Ne(s),z=s[0]&&xe(s);return{c(){e=h("div"),t=h("h1"),t.textContent=l,n=D(),r=h("div"),i=h("div"),j.c(),c=D(),a=h("div"),f=h("div"),u=h("input"),v=D(),m=h("button"),m.textContent=A,q=D(),O&&O.c(),W=D(),M=h("details"),U=h("summary"),U.textContent=J,G=D(),p=h("div"),B=h("button"),B.textContent=R,H=D(),P=h("button"),P.textContent=E,S=D(),N&&N.c(),k=D(),x&&x.c(),X=D(),Y=h("p"),le=L("Searching "),ee=L(Q),ae=L(" enchants"),re=D(),K=h("div"),K.innerHTML=se,me=D(),ne=h("img"),pe=D(),z&&z.c(),this.h()},l(b){e=_(b,"DIV",{});var w=C(e);t=_(w,"H1",{"data-svelte-h":!0}),F(t)!=="svelte-rwcd2f"&&(t.textContent=l),n=I(w),r=_(w,"DIV",{class:!0});var ce=C(r);i=_(ce,"DIV",{class:!0});var Te=C(i);j.l(Te),Te.forEach(d),c=I(ce),a=_(ce,"DIV",{});var fe=C(a);f=_(fe,"DIV",{});var ue=C(f);u=_(ue,"INPUT",{class:!0,type:!0,placeholder:!0}),v=I(ue),m=_(ue,"BUTTON",{"data-svelte-h":!0}),F(m)!=="svelte-wuju0c"&&(m.textContent=A),ue.forEach(d),q=I(fe),O&&O.l(fe),fe.forEach(d),ce.forEach(d),W=I(w),M=_(w,"DETAILS",{});var he=C(M);U=_(he,"SUMMARY",{"data-svelte-h":!0}),F(U)!=="svelte-13pakv6"&&(U.textContent=J),G=I(he),p=_(he,"DIV",{});var Z=C(p);B=_(Z,"BUTTON",{"data-svelte-h":!0}),F(B)!=="svelte-nl0fvt"&&(B.textContent=R),H=I(Z),P=_(Z,"BUTTON",{"data-svelte-h":!0}),F(P)!=="svelte-1pbgmv4"&&(P.textContent=E),S=I(Z),N&&N.l(Z),k=I(Z),x&&x.l(Z),Z.forEach(d),he.forEach(d),X=I(w),Y=_(w,"P",{});var _e=C(Y);le=y(_e,"Searching "),ee=y(_e,Q),ae=y(_e," enchants"),_e.forEach(d),re=I(w),K=_(w,"DIV",{class:!0,"data-svelte-h":!0}),F(K)!=="svelte-122a5ht"&&(K.innerHTML=se),me=I(w),ne=_(w,"IMG",{src:!0,alt:!0}),pe=I(w),z&&z.l(w),w.forEach(d),this.h()},h(){g(i,"class","mr-2"),g(u,"class","w-96 mb-2"),g(u,"type","text"),g(u,"placeholder","Manually enter an enchant"),g(r,"class","flex flex-row"),M.open=T=!!(s[6]||s[7]),g(K,"class","max-w-prose"),te(ne.src,we="/divine-font-1.png")||g(ne,"src",we),g(ne,"alt","Example divine font capture region")},m(b,w){V(b,e,w),o(e,t),o(e,n),o(e,r),o(r,i),j.m(i,null),o(r,c),o(r,a),o(a,f),o(f,u),Ae(u,s[2]),o(f,v),o(f,m),o(a,q),O&&O.m(a,null),o(e,W),o(e,M),o(M,U),o(M,G),o(M,p),o(p,B),o(p,H),o(p,P),o(p,S),N&&N.m(p,null),o(p,k),x&&x.m(p,null),o(e,X),o(e,Y),o(Y,le),o(Y,ee),o(Y,ae),o(e,re),o(e,K),o(e,me),o(e,ne),o(e,pe),z&&z.m(e,null),ge||(Ce=[oe(u,"input",s[10]),oe(m,"click",s[11]),oe(B,"click",s[13]),oe(P,"click",s[14])],ge=!0)},p(b,[w]){ie===(ie=ke(b))&&j?j.p(b,w):(j.d(1),j=ie(b),j&&(j.c(),j.m(i,null))),w&4&&u.value!==b[2]&&Ae(u,b[2]),b[8].length>0||b[1].length>0&&!b[4].status?O?O.p(b,w):(O=Ue(b),O.c(),O.m(a,null)):O&&(O.d(1),O=null),b[6]?N?N.p(b,w):(N=Oe(b),N.c(),N.m(p,k)):N&&(N.d(1),N=null),b[7]?x?x.p(b,w):(x=Ne(b),x.c(),x.m(p,null)):x&&(x.d(1),x=null),w&192&&T!==(T=!!(b[6]||b[7]))&&(M.open=T),w&8&&Q!==(Q=b[3].length+"")&&$(ee,Q),b[0]?z?z.p(b,w):(z=xe(b),z.c(),z.m(e,null)):z&&(z.d(1),z=null)},i:Se,o:Se,d(b){b&&d(e),j.d(),O&&O.d(),N&&N.d(),x&&x.d(),z&&z.d(),ge=!1,He(Ce)}}}const be="PUX_LAB_NOTES_BASE64",Ee="PUX_LAB_POI_BASE64";let ze="Paste an image (Ctrl + v) or";const Re=(s,e)=>e[1].averagePrice-s[1].averagePrice;function it(s,e,t){let l,n,r,i;ve(s,tt,p=>t(3,n=p)),ve(s,lt,p=>t(4,r=p)),ve(s,Ze,p=>t(9,i=p));let c="",a=[],f="",u=230,v="",m="";Ye(()=>{const p=localStorage.getItem(be);p&&t(6,v=p);const B=localStorage.getItem(Ee);B&&t(7,m=B);const R=localStorage.getItem($e);typeof R=="string"&&t(5,u=parseFloat(R||"0"))});function A(){f=this.value,t(2,f)}const q=()=>{t(2,f="")},W=(p,B)=>({id:B,value:{min:p.value,max:p.value}}),M=()=>{r.imageDataBase64&&(t(6,v=r.imageDataBase64),localStorage.setItem(be,v))},U=()=>{r.imageDataBase64&&(t(7,m=r.imageDataBase64),localStorage.setItem(Ee,m))},J=()=>{t(6,v=""),localStorage.setItem(be,"")},G=()=>{t(7,m=""),localStorage.setItem(Ee,"")};return s.$$.update=()=>{s.$$.dirty&12&&t(8,l=f?n.filter(({enchantText:p})=>p.toLowerCase().includes(f.toLowerCase())).sort((p,B)=>p.enchantText.localeCompare(B.enchantText)).slice(0,10):[]),s.$$.dirty&27&&r.rawText&&(t(0,c=r.rawText.replaceAll(/\s+/g," ").replaceAll(/[‘’]/g,"'").toLowerCase()),t(1,a=[]),n.forEach(({enchantText:p,ids:B,value:R})=>{const H=p.replaceAll(/\+/g,"\\+").replaceAll(/ /g,".{1,9}");try{const P=new RegExp(H,"i"),E=c.match(P);typeof(E==null?void 0:E.index)=="number"&&(console.log("re",P),t(1,a=[...a,{enchantText:p,ids:B,value:R,order:E.index}]))}catch(P){console.log("e",P)}console.log("reString",H),a.length>0&&a.sort((P,E)=>P.order-E.order)}))},[c,a,f,n,r,u,v,m,l,i,A,q,W,M,U,J,G]}class ct extends je{constructor(e){super(),qe(this,e,it,ot,Ve,{})}}function ft(s){let e,t;return e=new ct({}),{c(){Ke(e.$$.fragment)},l(l){Fe(e.$$.fragment,l)},m(l,n){We(e,l,n),t=!0},p:Se,i(l){t||(Xe(e.$$.fragment,l),t=!0)},o(l){Je(e.$$.fragment,l),t=!1},d(l){Qe(e,l)}}}class gt extends je{constructor(e){super(),qe(this,e,null,ft,Ve,{})}}export{gt as component};

import{s as X,i as ce,n as K,r as he,e as fe}from"../chunks/scheduler.be62eccd.js";import{S as oe,i as re,g as d,m as Q,s as N,h as _,j as A,n as W,f as T,c as O,x as R,k as x,a as Z,y as i,z as Y,A as V,o as se,d as z,b as ie,t as F,B as de,e as ee,p as ue,r as _e,u as pe,v as me,w as ve}from"../chunks/index.4ba873cb.js";import{e as te}from"../chunks/schemas.3f2493ca.js";import{e as G}from"../chunks/enchant-data.5bbc3879.js";function ge(n){let e,a,u=n[0].enchantText+"",r,t,s,g="Delete",p,c,b,C,D,m,J="Enchant Ids",B,k,v,L,S,I="Save",j,P;return{c(){e=d("div"),a=d("h3"),r=Q(u),t=N(),s=d("button"),s.textContent=g,p=N(),c=d("form"),b=d("table"),C=d("tbody"),D=d("tr"),m=d("td"),m.textContent=J,B=N(),k=d("td"),v=d("input"),L=N(),S=d("button"),S.textContent=I,this.h()},l(E){e=_(E,"DIV",{class:!0});var y=A(e);a=_(y,"H3",{});var M=A(a);r=W(M,u),M.forEach(T),t=O(y),s=_(y,"BUTTON",{type:!0,"data-svelte-h":!0}),R(s)!=="svelte-d9n0or"&&(s.textContent=g),p=O(y),c=_(y,"FORM",{});var w=A(c);b=_(w,"TABLE",{});var h=A(b);C=_(h,"TBODY",{});var H=A(C);D=_(H,"TR",{});var l=A(D);m=_(l,"TD",{"data-svelte-h":!0}),R(m)!=="svelte-lw28o7"&&(m.textContent=J),B=O(l),k=_(l,"TD",{});var o=A(k);v=_(o,"INPUT",{class:!0,type:!0}),o.forEach(T),l.forEach(T),H.forEach(T),h.forEach(T),L=O(w),S=_(w,"BUTTON",{type:!0,"data-svelte-h":!0}),R(S)!=="svelte-1f2bxem"&&(S.textContent=I),w.forEach(T),y.forEach(T),this.h()},h(){x(s,"type","button"),x(v,"class","w-96"),x(v,"type","text"),x(S,"type","submit"),x(e,"class","border-subtle mb-1")},m(E,y){Z(E,e,y),i(e,a),i(a,r),i(e,t),i(e,s),i(e,p),i(e,c),i(c,b),i(b,C),i(C,D),i(D,m),i(D,B),i(D,k),i(k,v),Y(v,n[3]),i(c,L),i(c,S),j||(P=[V(s,"click",function(){ce(n[1])&&n[1].apply(this,arguments)}),V(v,"input",n[4]),V(c,"submit",n[5])],j=!0)},p(E,[y]){n=E,y&1&&u!==(u=n[0].enchantText+"")&&se(r,u),y&8&&v.value!==n[3]&&Y(v,n[3])},i:K,o:K,d(E){E&&T(e),j=!1,he(P)}}}function be(n,e,a){let{enchant:u}=e,{handleDelete:r}=e,{handleEdit:t}=e,s=u.ids.join(";");function g(){s=this.value,a(3,s)}const p=()=>{t({...u,ids:s.split(";")})};return n.$$set=c=>{"enchant"in c&&a(0,u=c.enchant),"handleDelete"in c&&a(1,r=c.handleDelete),"handleEdit"in c&&a(2,t=c.handleEdit)},[u,r,t,s,g,p]}class Ee extends oe{constructor(e){super(),re(this,e,be,ge,X,{enchant:0,handleDelete:1,handleEdit:2})}}function ne(n,e,a){const u=n.slice();return u[6]=e[a],u}function ae(n){let e,a;function u(){return n[4](n[6])}function r(...t){return n[5](n[6],...t)}return e=new Ee({props:{enchant:n[6],handleDelete:u,handleEdit:r}}),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){me(e,t,s),a=!0},p(t,s){n=t;const g={};s&4&&(g.enchant=n[6]),s&4&&(g.handleDelete=u),s&4&&(g.handleEdit=r),e.$set(g)},i(t){a||(z(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){ve(e,t)}}}function le(n){let e=n[6].enchantText,a,u,r=ae(n);return{c(){r.c(),a=ee()},l(t){r.l(t),a=ee()},m(t,s){r.m(t,s),Z(t,a,s),u=!0},p(t,s){s&4&&X(e,e=t[6].enchantText)?(ue(),F(r,1,1,K),ie(),r=ae(t),r.c(),z(r,1),r.m(a.parentNode,a)):r.p(t,s)},i(t){u||(z(r),u=!0)},o(t){F(r),u=!1},d(t){t&&T(a),r.d(t)}}}function ye(n){let e,a,u="Enchant Database",r,t,s="Don't change anything on this page unless you know what is going on.",g,p,c,b,C,D,m,J,B,k,v,L="Debug",S,I,j=JSON.stringify(n[1],null,"  ")+"",P,E,y,M,w=te(n[2]),h=[];for(let l=0;l<w.length;l+=1)h[l]=le(ne(n,w,l));const H=l=>F(h[l],1,1,()=>{h[l]=null});return{c(){e=d("div"),a=d("h1"),a.textContent=u,r=N(),t=d("p"),t.textContent=s,g=N(),p=d("a"),c=Q("Export"),D=N(),m=d("input"),J=N();for(let l=0;l<h.length;l+=1)h[l].c();B=N(),k=d("details"),v=d("summary"),v.textContent=L,S=N(),I=d("pre"),P=Q(j),this.h()},l(l){e=_(l,"DIV",{});var o=A(e);a=_(o,"H1",{"data-svelte-h":!0}),R(a)!=="svelte-1in9slu"&&(a.textContent=u),r=O(o),t=_(o,"P",{"data-svelte-h":!0}),R(t)!=="svelte-ml3a55"&&(t.textContent=s),g=O(o),p=_(o,"A",{class:!0,href:!0,download:!0});var f=A(p);c=W(f,"Export"),f.forEach(T),D=O(o),m=_(o,"INPUT",{class:!0,placeholder:!0,type:!0}),J=O(o);for(let q=0;q<h.length;q+=1)h[q].l(o);B=O(o),k=_(o,"DETAILS",{});var U=A(k);v=_(U,"SUMMARY",{"data-svelte-h":!0}),R(v)!=="svelte-8t2ufj"&&(v.textContent=L),S=O(U),I=_(U,"PRE",{});var $=A(I);P=W($,j),$.forEach(T),U.forEach(T),o.forEach(T),this.h()},h(){x(p,"class","inline-block button-default no-underline text-white"),x(p,"href",b=`data:text/json;charset=utf-8,${JSON.stringify(n[1])}`),x(p,"download",C=`enchant-database-${n[1].length}.json`.replaceAll(/:/g,"").replaceAll(/[^a-z0-9-.]+/gi,"_")),x(m,"class","block my-1"),x(m,"placeholder","Filter enchants"),x(m,"type","text")},m(l,o){Z(l,e,o),i(e,a),i(e,r),i(e,t),i(e,g),i(e,p),i(p,c),i(e,D),i(e,m),Y(m,n[0]),i(e,J);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(e,null);i(e,B),i(e,k),i(k,v),i(k,S),i(k,I),i(I,P),E=!0,y||(M=V(m,"input",n[3]),y=!0)},p(l,[o]){if((!E||o&2&&b!==(b=`data:text/json;charset=utf-8,${JSON.stringify(l[1])}`))&&x(p,"href",b),(!E||o&2&&C!==(C=`enchant-database-${l[1].length}.json`.replaceAll(/:/g,"").replaceAll(/[^a-z0-9-.]+/gi,"_")))&&x(p,"download",C),o&1&&m.value!==l[0]&&Y(m,l[0]),o&4){w=te(l[2]);let f;for(f=0;f<w.length;f+=1){const U=ne(l,w,f);h[f]?(h[f].p(U,o),z(h[f],1)):(h[f]=le(U),h[f].c(),z(h[f],1),h[f].m(e,B))}for(ue(),f=w.length;f<h.length;f+=1)H(f);ie()}(!E||o&2)&&j!==(j=JSON.stringify(l[1],null,"  ")+"")&&se(P,j)},i(l){if(!E){for(let o=0;o<w.length;o+=1)z(h[o]);E=!0}},o(l){h=h.filter(Boolean);for(let o=0;o<h.length;o+=1)F(h[o]);E=!1},d(l){l&&T(e),de(h,l),y=!1,M()}}}function Ce(n,e,a){let u,r;fe(n,G,c=>a(1,r=c));let t="";function s(){t=this.value,a(0,t)}const g=c=>{G.update(b=>b.filter(C=>C.enchantText!==c.enchantText))},p=(c,b)=>{console.log("newEnchantData",b),G.update(C=>C.filter(D=>D.enchantText!==c.enchantText).concat([b]))};return n.$$.update=()=>{n.$$.dirty&3&&a(2,u=[...r].filter(c=>t?c.enchantText.toLowerCase().includes(t.toLowerCase()):!0))},[t,r,u,s,g,p]}class we extends oe{constructor(e){super(),re(this,e,Ce,ye,X,{})}}export{we as component};
